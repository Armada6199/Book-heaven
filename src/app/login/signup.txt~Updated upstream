let emailInput=document.getElementById("email");
let passInput=document.getElementById("pass");
let passRepInput=document.getElementById("pass-rep");
let noMatchSpan=document.querySelector("#no-match");
let weakPassSpan=document.querySelector("#weak-pass");
let nameInput=document.querySelector("#name-input")
let isMatched=false;
let showPass=false;
let hideIcon=document.querySelector(".hide-pass");
let intrests=document.querySelectorAll(".intrest")
let arrOfIntrests=[];
let signUpBtn=document.querySelector(".sign-up-btn");

let user={
    name:"",
    email:"",
    password:"",
    intrests:arrOfIntrests,
}


//hide the password when you click on the icon
function hidePass(ele){
        ele.addEventListener("click",()=>{
            if(showPass){
                passInput.setAttribute("type","text")
                passRepInput.setAttribute("type","text")
                showPass=false;
            }else {
                passInput.setAttribute("type","password")
                passRepInput.setAttribute("type","password")
                showPass=true;
            }
        })
}
//validates if the two passwords aare the same
function validRepeat(passIn,secPassIn){
if(passIn.value!==secPassIn.value){
    noMatchSpan.style.display="inline-block"
isMatched=false;
}
else {
    noMatchSpan.style.display="none"
isMatched=true;


}

}

///validate the password if its between 6-20 chars and if it contains one capital and on small and one digit
function passwordCheck(pass){
    let regx= /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,20}$/
    if(pass.match(regx)){
     weakPassSpan.style.display="none"

    }
    else {
     weakPassSpan.style.display="inline-block"
    }
 }
 ///remove the intrest if it got unselected
 function removeIntrest(arr,intrest){
    let newarr=[];
    arr.forEach(ele=>{
if(ele!==intrest){
newarr.push(ele);
}
    })
    return newarr;
 }
 ///adds the intrest to the array
 function addIntrestToArray(intrestBtn){
    if(intrestBtn.getAttribute("isClicked")){
        arrOfIntrests=removeIntrest(arrOfIntrests,intrestBtn.innerText)

                intrestBtn.removeAttribute("isClicked");
                intrestBtn.classList.remove("selected");
            }else {
                arrOfIntrests.push(intrestBtn.innerText)  ;
                intrestBtn.setAttribute("isClicked","true");
                intrestBtn.classList.add("selected");

            }
 }
 ///loops over the buttons and adds the event on it then adds the intrest to the arrayofIntrests
intrests.forEach((intrestBtn,index)=>{
intrestBtn.addEventListener("click",()=> addIntrestToArray(intrestBtn))})
//hide on icon click
hideIcon.addEventListener("click",hidePass(hideIcon))

///checks the validation whenever a user input something
passInput.addEventListener("input",()=>passwordCheck(passInput.value))

passInput.addEventListener("change",()=>{
    user.password=passInput.value;
})
emailInput.addEventListener("change",()=>{
    user.email=emailInput.value;
})
nameInput.addEventListener("change",()=>{
    user.name=nameInput.value;
})

//checks the validation of the repeated password
passRepInput.addEventListener("input",()=>validRepeat(passInput,passRepInput))
signUpBtn.addEventListener("click",()=>{
    console.log(user)
})
